app-id: org.linux_hardware.hw-probe
runtime: org.kde.Platform
runtime-version: "6.8"
sdk: org.kde.Sdk
command: hw-probe
finish-args:
  - --share=network
  - --device=all
  - --filesystem=host:ro
  - --filesystem=/var/log:ro
  - --filesystem=/sys:ro
  - --socket=wayland
  - --socket=fallback-x11
  - --share=ipc
  - --env=PATH=/usr/bin:/bin:/usr/sbin:/sbin:/app/bin:/app/sbin
  - --env=PERL5LIB=/app/share/perl5:/app/lib/x86_64-linux-gnu/perl-base:/app/lib/i386-linux-gnu/perl-base
  - --env=LD_LIBRARY_PATH=/app/lib/x86_64-linux-gnu/:/app/lib/i386-linux-gnu/:/app/lib64:/app/lib
  - --env=LC_ALL=C
cleanup:
  - /include
  - /man
  - /share/doc
  - /share/man
  - /share/hwinfo
  - /share/pkgconfig
  - /share/usb.ids.gz
  - /share/smartmontools
  - /share/smartd.service
  - /share/PERL5_BASE
  - /share/automake*
  - /share/info
  - /share/aclocal*
  - /share/libtool
  - /sbin/check_hd
  - /sbin/convert_hd
  - /sbin/fancontrol
  - /sbin/getsysinfo
  - /sbin/isadump
  - /sbin/isaset
  - /sbin/mk_isdnhwdb
  - /sbin/ownership
  - /sbin/pwmconfig
  - /sbin/sensors-detect
  - /sbin/setpci
  - /sbin/update-pciids
  - /sbin/update-usbids.sh
  - /sbin/vpddecode
  - /sbin/smartd
  - /sbin/update-smart-drivedb
  - /lib64/pkgconfig
  - /lib/pkgconfig
  - /lib/libltdl*
  - /bin/acpibin
  - /bin/acpiexamples
  - /bin/acpiexec
  - /bin/acpihelp
  - /bin/acpinames
  - /bin/acpisrc
  - /bin/kmod
  - /bin/lsusb.py
  - /bin/sensors-conf-convert
  - /bin/usbhid-dump
  - /bin/lex
  - /bin/automake*
  - /bin/aclocal*
  - /bin/libtool*
  - /etc/init.d
  - /etc/smartd_warning.d
  - /etc/sensors.d
  - /etc/smartd.conf
  - /etc/smartd_warning.sh
  - /var/lib
  - /lib/*.a
  - /lib/*.la
  - /usr
modules:
  - name: automake
    buildsystem: simple
    build-commands:
      - ./configure --prefix=$FLATPAK_DEST
      - make -j $FLATPAK_BUILDER_N_JOBS
      - make install
    sources:
      - type: archive
        url: https://ftp.gnu.org/gnu/automake/automake-1.17.tar.xz
        sha256: 8920c1fc411e13b90bf704ef9db6f29d540e76d232cb3b2c9f4dc4cc599bd990
  - name: libtool
    buildsystem: simple
    build-commands:
      - ./configure --prefix=$FLATPAK_DEST
      - make -j $FLATPAK_BUILDER_N_JOBS
      - make install
    sources:
      - type: archive
        url: https://ftp.gnu.org/gnu/libtool/libtool-2.5.3.tar.xz
        sha256: 898011232cc59b6b3bbbe321b60aba9db1ac11578ab61ed0df0299458146ae2e
  - name: edid-decode
    buildsystem: meson
    sources:
      - type: git
        url: https://git.linuxtv.org/edid-decode.git
        commit: 8fd97f32c8f25b6560a5766066218a72ad2e2a01
  - name: dmidecode
    buildsystem: simple
    build-commands:
      - sed -i -e 's/ -O2/ -s -O2/' Makefile
      - make -j $FLATPAK_BUILDER_N_JOBS
      - find . -type f | perl -lne 'print if -B and -x' | xargs strip
      - make install prefix=/ DESTDIR=$FLATPAK_DEST
    sources:
      - type: archive
        url: https://download-mirror.savannah.gnu.org/releases/dmidecode/dmidecode-3.6.tar.xz
        sha256: e40c65f3ec3dafe31ad8349a4ef1a97122d38f65004ed66575e1a8d575dd8bae
  - name: iproute2
    buildsystem: simple
    build-commands:
      - ./configure --prefix=$FLATPAK_DEST
      - make -j $FLATPAK_BUILDER_N_JOBS
      - find . -type f | perl -lne 'print if -B and -x' | xargs strip
      - install -D ./ip/ip $FLATPAK_DEST/sbin/ip
    sources:
      - type: archive
        url: https://mirrors.edge.kernel.org/pub/linux/utils/net/iproute2/iproute2-6.11.0.tar.xz
        sha256: 1f795398a04aeaacd06a8f6ace2cfd913c33fa5953ca99daae83bb5c534611c3
  - name: lm-sensors
    buildsystem: simple
    build-commands:
      - sed -i -e 's/ -g / -s /' Makefile
      - make -j $FLATPAK_BUILDER_N_JOBS
      - find . -type f | perl -lne 'print if -B and -x' | xargs strip
      - make install BUILD_STATIC_LIB=0 DEBUG=0 PREFIX=/ DESTDIR=$FLATPAK_DEST
    sources:
      - type: archive
        url: https://github.com/lm-sensors/lm-sensors/archive/V3-6-0.tar.gz
        sha256: 0591f9fa0339f0d15e75326d0365871c2d4e2ed8aa1ff759b3a55d3734b7d197
  - name: libkmod
    buildsystem: simple
    build-commands:
      - ./configure --disable-debug --disable-python --disable-logging --disable-test-modules --disable-manpages --prefix=$FLATPAK_DEST
      - sed -i -e 's/ -g / -s /' Makefile
      - make -j $FLATPAK_BUILDER_N_JOBS
      - find . -type f | perl -lne 'print if -B and -x' | xargs strip
      - make install DESTDIR=$FLATPAK_DEST
      - install -D ./tools/lsmod $FLATPAK_DEST/bin/lsmod
    sources:
      - type: archive
        url: https://cdn.kernel.org/pub/linux/utils/kernel/kmod/kmod-33.tar.xz
        sha256: dc768b3155172091f56dc69430b5481f2d76ecd9ccb54ead8c2540dbcf5ea9bc
  - name: libusb-1
    buildsystem: simple
    build-commands:
      - NOCONFIGURE=1 sh autogen.sh
      - ./configure --disable-static --disable-udev --prefix=$FLATPAK_DEST
      - sed -i -e 's/ -g / -s /' Makefile
      - make -j $FLATPAK_BUILDER_N_JOBS
      - find . -type f | perl -lne 'print if -B and -x' | xargs strip
      - make install
      - mkdir -p /app/lib/pkgconfig
      - cp libusb-1.0.pc /app/lib/pkgconfig/
    sources:
      - type: archive
        url: https://github.com/libusb/libusb/archive/v1.0.27.tar.gz
        sha256: e8f18a7a36ecbb11fb820bd71540350d8f61bcd9db0d2e8c18a6fb80b214a3de
  - name: usbutils
    buildsystem: meson
    builddir: true
    cleanup:
      - /include
      - /bin/lsusb.py
    sources:
      - type: git
        url: https://github.com/gregkh/usbutils.git
        tag: v018
  - name: pciutils
    buildsystem: simple
    build-commands:
      - make -j $FLATPAK_BUILDER_N_JOBS
      - make install PREFIX=/ DESTDIR=$FLATPAK_DEST SHARED=no LIBKMOD=no HWDB=no ZLIB=no DNS=no
      - sed -i -e 's|/share/pci.ids|/var/tmp/P_PCI|' $FLATPAK_DEST/bin/lspci
    sources:
      - type: archive
        url: https://github.com/pciutils/pciutils/archive/v3.13.0.tar.gz
        sha256: 861fc26151a4596f5c3cb6f97d6c75c675051fa014959e26fb871c8c932ebc67
  - name: acpica-unix
    buildsystem: simple
    build-commands:
      - make -j $FLATPAK_BUILDER_N_JOBS
      - make install DESTDIR=$FLATPAK_DEST PREFIX=/
    sources:
      - type: git
        url: https://github.com/deepin-community/acpica-unix.git
        commit: 9f26014f956be5f981acab4458fd2328acd2a605
  - name: hdparm
    buildsystem: simple
    build-commands:
      - make -j $FLATPAK_BUILDER_N_JOBS
      - make install DESTDIR=`pwd`/INST
      - install -D INST/sbin/hdparm $FLATPAK_DEST/sbin/hdparm
    sources:
      - type: archive
        url: https://github.com/linuxhw/build-stuff/releases/download/1.6/hdparm-9.65.tar.gz
        sha256: d14929f910d060932e717e9382425d47c2e7144235a53713d55a94f7de535a4b
  - name: smartmontools
    buildsystem: simple
    build-commands:
      - NOCONFIGURE=1 sh autogen.sh
      - ./configure --with-nvme-devicescan --prefix=$FLATPAK_DEST --with-systemdsystemunitdir=/share
      - sed -i -e 's/ -g / -s /' Makefile
      - make -j $FLATPAK_BUILDER_N_JOBS
      - find . -type f | perl -lne 'print if -B and -x' | xargs strip
      - make install DESTDIR=$FLATPAK_DEST
    sources:
      - type: archive
        url: https://github.com/linuxhw/build-stuff/releases/download/1.6/smartmontools-7.4.tar.gz
        sha256: e9a61f641ff96ca95319edfb17948cd297d0cd3342736b2c49c99d4716fb993d
  - name: util-linux
    buildsystem: simple
    build-commands:
      - ./configure --prefix=$FLATPAK_DEST
      - sed -i -e 's/ -g / -s /' Makefile
      - make -j $FLATPAK_BUILDER_N_JOBS dmesg
      - make -j $FLATPAK_BUILDER_N_JOBS lscpu
      - make -j $FLATPAK_BUILDER_N_JOBS lsblk
      - find . -type f | grep -v img.xz | perl -lne 'print if -B and -x' | xargs strip
      - install -D ./dmesg $FLATPAK_DEST/bin/dmesg
      - install -D ./lscpu $FLATPAK_DEST/bin/lscpu
      - install -D ./lsblk $FLATPAK_DEST/bin/lsblk
    sources:
      - type: archive
        url: https://mirrors.edge.kernel.org/pub/linux/utils/util-linux/v2.39/util-linux-2.39.4.tar.xz
        sha256: 6c4f8723dafd41c39d93ecbf16509fc88c33cd5bd3277880ae5a1d97a014fd0e
  - name: libx86emu
    buildsystem: simple
    build-commands:
      - echo '3.5' > VERSION
      - rm -f git2log
      - sed -i -e 's/ -g / -s /' Makefile
      - make -j $FLATPAK_BUILDER_N_JOBS
      - find . -type f | perl -lne 'print if -B and -x' | xargs strip
      - make install DESTDIR=`pwd`/INST
      - cp -fr INST/usr/* $FLATPAK_DEST/
    sources:
      - type: archive
        url: https://github.com/wfeldt/libx86emu/archive/3.5.tar.gz
        sha256: 91da55f5da55017d5a80e2364de30f9520aa8df2744ff587a09ba58d6e3536c8
  - name: lex
    buildsystem: simple
    build-commands:
      - NOCONFIGURE=1 sh autogen.sh
      - ./configure
      - make -j $FLATPAK_BUILDER_N_JOBS
      - install -D src/flex $FLATPAK_DEST/bin/lex
    sources:
      - type: archive
        url: https://launchpad.net/ubuntu/+archive/primary/+sourcefiles/flex/2.6.4-8.2build1/flex_2.6.4.orig.tar.gz
        sha256: e87aae032bf07c26f85ac0ed3250998c37621d95f8bd748b31f15b33c45ee995
  - name: perl-uri
    buildsystem: simple
    build-commands:
      - perl Makefile.PL
      - make install DESTDIR=`pwd`/INST INSTALLSITELIB=/SITELIB
      - mkdir -p $FLATPAK_DEST/share/perl5/
      - cp -fr ./INST/SITELIB/* $FLATPAK_DEST/share/perl5/
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/E/ET/ETHER/URI-5.08.tar.gz
        sha256: 7e2c6fe3b1d5947da334fa558a96e748aaa619213b85bcdce5b5347d4d26c46e
  - name: perl-http-message
    buildsystem: simple
    build-commands:
      - perl Makefile.PL
      - make install DESTDIR=`pwd`/INST INSTALLSITELIB=/SITELIB
      - mkdir -p $FLATPAK_DEST/share/perl5/
      - cp -fr ./INST/SITELIB/* $FLATPAK_DEST/share/perl5/
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/O/OA/OALDERS/HTTP-Message-6.37.tar.gz
        sha256: 0e59da0a85e248831327ebfba66796314cb69f1bfeeff7a9da44ad766d07d802
  - name: perl-net-http
    buildsystem: simple
    build-commands:
      - perl Makefile.PL
      - make install DESTDIR=`pwd`/INST INSTALLSITELIB=/SITELIB
      - mkdir -p $FLATPAK_DEST/share/perl5/
      - cp -fr ./INST/SITELIB/* $FLATPAK_DEST/share/perl5/
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/O/OA/OALDERS/Net-HTTP-6.22.tar.gz
        sha256: 62faf9a5b84235443fe18f780e69cecf057dea3de271d7d8a0ba72724458a1a2
  - name: perl-try-tiny
    buildsystem: simple
    build-commands:
      - perl Makefile.PL
      - make install DESTDIR=`pwd`/INST INSTALLSITELIB=/SITELIB
      - mkdir -p $FLATPAK_DEST/share/perl5/
      - cp -fr ./INST/SITELIB/* $FLATPAK_DEST/share/perl5/
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/E/ET/ETHER/Try-Tiny-0.31.tar.gz
        sha256: 3300d31d8a4075b26d8f46ce864a1d913e0e8467ceeba6655d5d2b2e206c11be
  - name: perl-lwp-mediatypes
    buildsystem: simple
    build-commands:
      - perl Makefile.PL
      - make install DESTDIR=`pwd`/INST INSTALLSITELIB=/SITELIB
      - mkdir -p $FLATPAK_DEST/share/perl5/
      - cp -fr ./INST/SITELIB/* $FLATPAK_DEST/share/perl5/
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/G/GA/GAAS/LWP-MediaTypes-6.02.tar.gz
        sha256: 18790b0cc5f0a51468495c3847b16738f785a2d460403595001e0b932e5db676
  - name: perl-http-date
    buildsystem: simple
    build-commands:
      - perl Makefile.PL
      - make install DESTDIR=`pwd`/INST INSTALLSITELIB=/SITELIB
      - mkdir -p $FLATPAK_DEST/share/perl5/
      - cp -fr ./INST/SITELIB/* $FLATPAK_DEST/share/perl5/
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/G/GA/GAAS/HTTP-Date-6.02.tar.gz
        sha256: e8b9941da0f9f0c9c01068401a5e81341f0e3707d1c754f8e11f42a7e629e333
  - name: perl-timedate
    buildsystem: simple
    build-commands:
      - perl Makefile.PL
      - make install DESTDIR=`pwd`/INST INSTALLSITELIB=/SITELIB
      - mkdir -p $FLATPAK_DEST/share/perl5/
      - cp -fr ./INST/SITELIB/* $FLATPAK_DEST/share/perl5/
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/G/GB/GBARR/TimeDate-2.30.tar.gz
        sha256: 75bd254871cb5853a6aa0403ac0be270cdd75c9d1b6639f18ecba63c15298e86
  - name: libwww-perl
    buildsystem: simple
    build-commands:
      - perl Makefile.PL
      - make install DESTDIR=`pwd`/INST INSTALLSITELIB=/SITELIB
      - mkdir -p $FLATPAK_DEST/share/perl5/
      - cp -fr ./INST/SITELIB/* $FLATPAK_DEST/share/perl5/
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/E/ET/ETHER/libwww-perl-6.36.tar.gz
        sha256: 75c034ab4b37f4b9506dc644300697505582cf9545bcf2e2079e7263f675290a
  - name: perl-parent
    buildsystem: simple
    build-commands:
      - perl Makefile.PL
      - make install DESTDIR=`pwd`/INST INSTALLSITELIB=/SITELIB
      - mkdir -p $FLATPAK_DEST/share/perl5/
      - cp -fr ./INST/SITELIB/* $FLATPAK_DEST/share/perl5/
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/C/CO/CORION/parent-0.238.tar.gz
        sha256: 38f58fdef3e28a194c9c8d0dc5d02672faf93c069f40c5bcb1fabeadbbc4d2d1
  - name: perl-time-local
    buildsystem: simple
    build-commands:
      - perl Makefile.PL
      - make install DESTDIR=`pwd`/INST INSTALLSITELIB=/SITELIB
      - mkdir -p $FLATPAK_DEST/share/perl5/
      - cp -fr ./INST/SITELIB/* $FLATPAK_DEST/share/perl5/
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/D/DR/DROLSKY/Time-Local-1.30.tar.gz
        sha256: c7744f6b2986b946d3e2cf034df371bee16cdbafe53e945abb1a542c4f8920cb
  - name: perl-data-dumper
    buildsystem: simple
    build-commands:
      - perl Makefile.PL
      - make install DESTDIR=`pwd`/INST INSTALLSITELIB=/SITELIB
      - chmod 777 -R ./INST
      - find ./INST -type f | perl -lne 'print if -B and -x' | xargs strip
      - mkdir -p $FLATPAK_DEST/share/perl5/
      - cp -fr ./INST/usr/lib/perl5/*/* $FLATPAK_DEST/share/perl5/
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/S/SM/SMUELLER/Data-Dumper-2.161.tar.gz
        sha256: 3aa4ac1b042b3880438165fb2b2139d377564a8e9928ffe689ede5304ee90558
  - name: PyQt6
    buildsystem: simple
    build-commands:
      - sip-install
        --confirm-license
        --no-designer-plugin
        --no-qml-plugin
        --no-tools
        --concatenate=1
        --no-docstrings
        --verbose
        --qt-shared
        --target-dir=/app/lib/python3.9/site-packages/
        --enable=QtCore
        --enable=QtGui
        --enable=QtWidgets
    sources:
      - type: archive
        url: https://files.pythonhosted.org/packages/d1/f9/b0c2ba758b14a7219e076138ea1e738c068bf388e64eee68f3df4fc96f5a/PyQt6-6.7.1.tar.gz
        sha256: 3672a82ccd3a62e99ab200a13903421e2928e399fda25ced98d140313ad59cb9
    modules:
      - name: python3-sip
        buildsystem: simple
        build-commands:
          - pip3 install --no-deps --no-use-pep517 --prefix=$FLATPAK_DEST .
        sources:
          - type: archive
            url: https://files.pythonhosted.org/packages/6e/52/36987b182711104d5e9f8831dd989085b1241fc627829c36ddf81640c372/sip-6.8.6.tar.gz
            sha256: 7fc959e48e6ec5d5af8bd026f69f5e24d08b3cb8abb342176f5ab8030cc07d7a
        modules:
          - name: python-toml
            buildsystem: simple
            build-commands:
                - pip3 install --no-deps --no-use-pep517 --prefix=$FLATPAK_DEST .
            sources:
                - type: archive
                  url: https://files.pythonhosted.org/packages/be/ba/1f744cdc819428fc6b5084ec34d9b30660f6f9daaf70eead706e3203ec3c/toml-0.10.2.tar.gz
                  sha256: b3bda1d108d5dd99f4a20d24d9c348e91c4db7ab1b749200bded2f839ccbe68f
          - name: python-packaging
            buildsystem: simple
            build-commands:
                - pip3 install --no-deps --no-use-pep517 --prefix=$FLATPAK_DEST .
            sources:
                - type: archive
                  url: https://files.pythonhosted.org/packages/51/65/50db4dda066951078f0a96cf12f4b9ada6e4b811516bf0262c0f4f7064d4/packaging-24.1.tar.gz
                  sha256: 026ed72c8ed3fcce5bf8950572258698927fd1dbda10a5e981cdf0ac37f4f002
            cleanup:
                - "*"
      - name: PyQt6_sip
        buildsystem: simple
        build-commands:
          - pip3 install --no-deps --no-use-pep517 --prefix=$FLATPAK_DEST .
        sources:
          - type: archive
            url: https://files.pythonhosted.org/packages/e9/b7/95ac49b181096ef40144ef05aff8de7c9657de7916a70533d202ed9f0fd2/PyQt6_sip-13.8.0.tar.gz
            sha256: 2f74cf3d6d9cab5152bd9f49d570b2dfb87553ebb5c4919abfde27f5b9fd69d4
      - name: python-pyparsing
        buildsystem: simple
        build-commands:
          - pip3 install --no-deps --no-use-pep517 --prefix=$FLATPAK_DEST .
        sources:
          - type: archive
            url: https://files.pythonhosted.org/packages/8c/d5/e5aeee5387091148a19e1145f63606619cb5f20b83fccb63efae6474e7b2/pyparsing-3.2.0.tar.gz
            sha256: cbf74e27246d595d9a74b186b810f6fbb86726dbf3b9532efb343f6d7294fe9c
        cleanup:
          - "*"
      - name: PyQt-builder
        buildsystem: simple
        build-commands:
          - pip3 install --no-deps --no-use-pep517 --prefix=$FLATPAK_DEST .
        sources:
          - type: archive
            url: https://files.pythonhosted.org/packages/e6/f5/daead7fd8ef3675ce55f4ef66dbe3287b0bdd74315f6b5a57718a020570b/pyqt_builder-1.16.4.tar.gz
            sha256: 4515e41ae379be2e54f88a89ecf47cd6e4cac43e862c4abfde18389c2666afdf
        cleanup:
        - "*"
  - name: hwinfo
    skip-arches:
      - aarch64
      - arm
    buildsystem: simple
    build-commands:
      - echo '22.1' > VERSION
      - rm -f git2log
      - sed -i -e 's/ -g / -s /' Makefile.common
      - CFLAGS='-I'$FLATPAK_DEST'/include' LDFLAGS='-L'$FLATPAK_DEST'/lib64 -L'$FLATPAK_DEST'/lib -lx86emu' LD_LIBRARY_PATH=$FLATPAK_DEST'/lib64:'$FLATPAK_DEST'/lib' make
      - make install DESTDIR=`pwd`/INST
      - cp -fr INST/usr/* $FLATPAK_DEST/
    sources:
      - type: archive
        url: https://github.com/openSUSE/hwinfo/archive/23.3.tar.gz
        sha256: ee7f1cb15bde7d6d40cc5f70e382dbaa8264a12f0b1692eba23f14ea146c0e0d
  - name: hwinfo
    only-arches:
      - aarch64
      - arm
    buildsystem: simple
    build-commands:
      - echo '22.1' > VERSION
      - rm -f git2log
      - sed -i -e 's/ -g / -s /' Makefile.common
      - make
      - make install DESTDIR=`pwd`/INST
      - cp -fr INST/usr/* $FLATPAK_DEST/
    sources:
      - type: archive
        url: https://github.com/openSUSE/hwinfo/archive/23.3.tar.gz
        sha256: ee7f1cb15bde7d6d40cc5f70e382dbaa8264a12f0b1692eba23f14ea146c0e0d
  - name: hw-probe
    buildsystem: simple
    build-commands:
      - make install DESTDIR=$FLATPAK_DEST prefix=/
      - mv $FLATPAK_DEST/bin/hw-probe $FLATPAK_DEST/bin/hw-probe-flatpak
      - install -m 777 -D flatpak/hw-probe.sh $FLATPAK_DEST/bin/hw-probe
      - install -D flatpak/PERL5_BASE $FLATPAK_DEST/share/PERL5_BASE
      - install -D flatpak/hw-probe.appdata.xml $FLATPAK_DEST/share/metainfo/org.linux_hardware.hw-probe.appdata.xml
      - install -D flatpak/icon-256x256.png $FLATPAK_DEST/share/icons/hicolor/256x256/apps/org.linux_hardware.hw-probe.png
      - install -D flatpak/icon-128x128.png $FLATPAK_DEST/share/icons/hicolor/128x128/apps/org.linux_hardware.hw-probe.png
      - install -D flatpak/icon-64x64.png $FLATPAK_DEST/share/icons/hicolor/64x64/apps/org.linux_hardware.hw-probe.png
      - install -D flatpak/hw-probe.desktop $FLATPAK_DEST/share/applications/org.linux_hardware.hw-probe.desktop
      - install -D flatpak/usb.ids $FLATPAK_DEST/share/usb.ids
      - install -D flatpak/pci.ids $FLATPAK_DEST/share/pci.ids
    sources:
      - type: archive
        url: https://github.com/linuxhw/build-stuff/releases/download/1.6/hw-probe-1.6-AI.tar.gz
        sha256: 4855a49a42c0ebe4cdadd8fd2217137d6f3643a662ad3b7c1f34a5c1b61859d2
  - name: hw-probe-pyqt6-gui
    buildsystem: simple
    build-commands:
      - mkdir -p $FLATPAK_DEST/share/hw-probe-pyqt6-gui/
      - mv Resources Hardware\ Probe $FLATPAK_DEST/share/hw-probe-pyqt6-gui/
      - ln -s $FLATPAK_DEST/share/hw-probe-pyqt6-gui/Hardware\ Probe $FLATPAK_DEST/bin/hw-probe-pyqt6-gui
      - chmod 777 $FLATPAK_DEST/bin/hw-probe-pyqt6-gui
    sources:
      - type: archive
        url: https://github.com/linuxhw/build-stuff/releases/download/1.6/hw-probe-pyqt6-gui-1.0-AI.tar.gz
        sha256: 3a0a09d486a3b813397689e7de2df84b3132e7dab3d6dcda76cc19298b082c9c
  - name: perl-base
    buildsystem: simple
    build-commands:
      - sh Configure -de -Dprefix=/
      - make -j $FLATPAK_BUILDER_N_JOBS
      - find . -type f | perl -lne 'print if -B and -x' | xargs strip
      - install -D ./perl $FLATPAK_DEST/bin/perl
      - cd lib && cat $FLATPAK_DEST/share/PERL5_BASE | while read i; do mkdir -p $FLATPAK_DEST/share/perl5/`dirname $i`; cp -fr $i $FLATPAK_DEST/share/perl5/$i; done
    sources:
      - type: archive
        url: https://www.cpan.org/src/5.0/perl-5.40.0.tar.gz
        sha256: c740348f357396327a9795d3e8323bafd0fe8a5c7835fc1cbaba0cc8dfe7161f
